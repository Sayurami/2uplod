<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>SL ANIME WORLD</title>

  <!-- Google / AdSense verification & sample autoscript (replace client id if needed) -->
  <meta name="google-adsense-account" content="ca-pub-4517560700517113">
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4517560700517113"
          crossorigin="anonymous"></script>

  <style>
    /* ---------- Base ---------- */
    :root{
      --accent-1: #6a11cb;
      --accent-2: #2575fc;
      --muted:#f5f6fb;
      --card-bg:#ffffff;
      --text:#222;
      --glass: rgba(255,255,255,0.08);
    }
    *{box-sizing:border-box}
    body{
      font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      margin:0; background:var(--muted); color:var(--text);
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      transition: background .25s,color .25s;
    }

    /* ---------- Header + Nav ---------- */
    header{
      background: linear-gradient(90deg,var(--accent-1),var(--accent-2));
      color:#fff; padding:20px 16px; text-align:center; position:relative;
      box-shadow: 0 6px 20px rgba(30,30,30,0.12);
    }
    header .title{font-weight:700; font-size:20px; letter-spacing:1px}
    .hamburger{
      display:none; position:absolute; left:16px; top:18px; cursor:pointer;
      width:30px; height:22px; flex-direction:column; justify-content:space-between;
    }
    .hamburger span{display:block;height:3px;background:#fff;border-radius:3px}

    nav{
      background:#0f1720; padding:10px 12px; display:flex; justify-content:center;
      gap:12px; flex-wrap:wrap;
    }
    .nav-links{display:flex; gap:10px; align-items:center}
    .nav-links a{
      color:#fff; text-decoration:none; font-weight:600; padding:8px 12px; border-radius:8px;
      transition:background .15s,color .15s;
    }
    .nav-links a:hover{background:rgba(255,255,255,0.05); color:#ffea9a}

    /* ---------- Layout ---------- */
    main{padding:18px; max-width:1100px; margin:0 auto}
    .controls{display:flex; gap:12px; align-items:center; justify-content:center; flex-wrap:wrap}
    #searchBar{
      width:100%; max-width:520px; padding:10px 12px; border-radius:12px; border:1px solid #ddd;
      box-shadow: 0 2px 8px rgba(16,24,40,0.04);
    }

    .top-actions{display:flex; gap:10px; align-items:center}
    .btn{
      background:linear-gradient(90deg,var(--accent-1),var(--accent-2));
      color:white; border:none; padding:9px 12px; border-radius:10px; cursor:pointer;
      box-shadow: 0 6px 16px rgba(37,117,252,0.14); font-weight:700;
    }
    .btn.ghost{background:transparent; color:var(--text); border:1px solid #ddd; box-shadow:none}

    /* ---------- Gallery (grid responsive) ---------- */
    .gallery{
      display:grid; grid-template-columns: repeat(auto-fill, minmax(180px,1fr));
      gap:18px; margin-top:20px;
    }
    .gallery-item{
      background:var(--card-bg); border-radius:12px; overflow:hidden;
      box-shadow: 0 8px 22px rgba(16,24,40,0.06); padding:10px; display:flex; flex-direction:column;
      transition: transform .22s, box-shadow .22s;
    }
    .gallery-item:hover{ transform: translateY(-6px); box-shadow: 0 12px 36px rgba(16,24,40,0.12); }
    .gallery-item img{ width:100%; height:140px; object-fit:cover; border-radius:8px; display:block; }
    .meta{padding:10px 6px; text-align:center; flex:1}
    .meta h3{margin:6px 0 4px;font-size:15px}
    .meta p{margin:0;font-size:13px;color:#666}
    .meta .row{margin-top:8px; display:flex; gap:8px; justify-content:center}
    .meta .row button{padding:8px 10px;border-radius:8px;border:none; cursor:pointer;font-weight:700}
    .download{background:#16a34a;color:#fff}
    .delete{background:#e11d48;color:#fff}

    /* ---------- Admin form + login ---------- */
    #uploadForm, #loginBox{ background:var(--card-bg); padding:12px; border-radius:12px; max-width:420px; margin:14px auto; box-shadow: 0 8px 20px rgba(16,24,40,0.06) }
    #uploadForm input,#uploadForm textarea, #loginBox input{ width:100%; padding:8px; margin:8px 0; border-radius:8px; border:1px solid #ddd }
    #uploadForm button{ width:100% }

    /* ---------- Contact / Sections ---------- */
    section{ margin-top:26px; padding:12px }
    #contactBox{ display:inline-block; background:var(--card-bg); padding:12px 16px; border-radius:10px; box-shadow:0 6px 18px rgba(16,24,40,0.06) }

    /* ---------- Footer ---------- */
    footer{ margin-top:30px; padding:22px; text-align:center; color:#fff; background:linear-gradient(90deg,#2575fc,#6a11cb); }

    /* ---------- Dark theme support ---------- */
    .dark{ background:#0b0f12; color:#e6eef8 }
    .dark main{ color:#e6eef8 }
    .dark .gallery-item{ background:#13171a; box-shadow:none; border:1px solid rgba(255,255,255,0.03) }
    .dark nav{ background:#05060a }

    /* ---------- Responsive (mobile) ---------- */
    @media (max-width:780px){
      .hamburger{display:flex}
      .nav-links{display:none; width:100%; flex-direction:column; padding:8px 12px}
      .nav-links.active{display:flex}
      header .title{font-size:18px}
      .gallery-item img{height:120px}
    }
  </style>
</head>
<body>

  <!-- Header -->
  <header>
    <div class="title">üåê SL ANIME WORLD</div>
    <div class="hamburger" onclick="toggleMenu()">
      <span></span><span></span><span></span>
    </div>
  </header>

  <!-- Navigation -->
  <nav>
    <div class="nav-links" id="navLinks">
      <a href="#">Home</a>
      <a href="#categories">Categories</a>
      <a href="#about">About</a>
      <a href="#contactBox">Contact</a>
      <a href="#privacy">Privacy Policy</a>
    </div>
  </nav>

  <!-- Theme toggle + small ad slot -->
  <div style="position:fixed; right:14px; top:14px; z-index:80;">
    <button class="btn" id="themeBtn" onclick="toggleTheme()">‚òÄÔ∏è</button>
  </div>

  <main>
    <!-- Search + Actions -->
    <div class="controls">
      <input id="searchBar" placeholder="Search anime, wallpapers, tags..." oninput="searchGallery()" />
    </div>

    <!-- Small Ad (Auto ads handled by AdSense script; below is a responsive unit example) -->
    <div style="margin:14px auto; max-width:728px; text-align:center;">
      <!-- sample ad slot (AdSense will fill) -->
      <ins class="adsbygoogle"
           style="display:block"
           data-ad-client="ca-pub-4517560700517113"
           data-ad-slot="1234567890"
           data-ad-format="auto"
           data-full-width-responsive="true"></ins>
      <script>(adsbygoogle = window.adsbygoogle || []).push({});</script>
    </div>

    <!-- Admin login toggle button -->
    <div style="text-align:center; margin-top:8px;">
      <button class="btn ghost" id="loginToggle">Admin Login</button>
    </div>

    <!-- Admin Login box (hidden by default) -->
    <div id="loginBox" style="display:none;">
      <h3 style="margin:6px 0 10px">üîë Admin Login</h3>
      <input id="username" placeholder="Username" />
      <input id="password" type="password" placeholder="Password" />
      <div style="display:flex; gap:8px; margin-top:8px;">
        <button class="btn" style="flex:1" onclick="login()">Login</button>
        <button class="btn ghost" style="flex:1" onclick="hideLogin()">Cancel</button>
      </div>
      <small style="color:#666">Admin credentials are frontend-only in this demo. For production, move auth to backend.</small>
    </div>

    <!-- Upload form (admin-only) -->
    <form id="uploadForm" enctype="multipart/form-data" style="display:none;">
      <input type="file" name="photo" accept="image/*" required />
      <input name="name" placeholder="Photo name (title)" />
      <textarea name="description" rows="2" placeholder="Short description / links"></textarea>
      <button class="btn" type="submit">Upload</button>
    </form>

    <!-- Categories / Gallery -->
    <section id="categories">
      <h2 style="margin:0 0 10px;">üìÇ Categories & Latest</h2>

      <!-- Gallery grid -->
      <div class="gallery" id="gallery">
        <!-- Items will be rendered by script. If no backend, demo items are used. -->
      </div>
    </section>

    <!-- About -->
    <section id="about">
      <h2 style="margin:0 0 8px;">‚ÑπÔ∏è About SL ANIME WORLD</h2>
      <p style="max-width:820px; margin:6px auto 0; color:#5b6470">
        SL ANIME WORLD is a community-driven hub for anime wallpapers, reviews and short writeups. We aim to provide a clean, fast and mobile-first browsing experience.
      </p>
    </section>

    <!-- Contact -->
    <div id="contactBox" style="text-align:center; margin-top:18px;">
      <h3 style="margin:6px 0">üìû Contact Owner</h3>
      <p style="margin:6px 0">WhatsApp: <a href="https://wa.me/94743826406" target="_blank">0743826406</a></p>
    </div>

    <!-- Privacy teaser -->
    <section id="privacy">
      <h2 style="margin:12px 0 6px">üîê Privacy Policy</h2>
      <p style="max-width:820px; margin:6px auto 10px; color:#5b6470">We respect your privacy. This site uses cookies for basic functionality and for showing ads. Detailed policy page should be added as a separate page (privacy.html) for AdSense.</p>
    </section>

  </main>

  <footer>
    <div style="max-width:980px;margin:0 auto">
      <div style="margin-bottom:8px">¬© 2025 SL ANIME WORLD</div>
      <div>
        <a href="#privacy">Privacy Policy</a> ¬∑
        <a href="#">Terms</a> ¬∑
        <a href="#">Disclaimer</a>
      </div>
    </div>
  </footer>

<script>
/* ---------- Config / Admin (demo) ---------- */
const ADMIN_USER = "sayura";
const ADMIN_PASS = "Sayura2008***7";
let isAdmin = false;

/* ---------- UI Helpers ---------- */
function toggleMenu(){
  const nav = document.getElementById('navLinks') || document.querySelector('.nav-links');
  if(!nav) return;
  nav.classList.toggle('active');
}
function toggleTheme(){
  document.documentElement.classList.toggle('dark');
  document.body.classList.toggle('dark');
  const btn = document.getElementById('themeBtn');
  if(btn) btn.textContent = document.body.classList.contains('dark') ? 'üåô' : '‚òÄÔ∏è';
}
document.getElementById('loginToggle').addEventListener('click', () => {
  const box = document.getElementById('loginBox');
  box.style.display = box.style.display === 'none' ? 'block' : 'none';
});
function hideLogin(){ document.getElementById('loginBox').style.display = 'none' }

/* ---------- Demo fallback items (used if backend not responding) ---------- */
const DEMO_ITEMS = [
  { id:'demo-1', name:'Naruto - Sunset', description:'Wallpaper - Naruto Uzumaki', image:'https://wallpapercave.com/wp/wp1822736.jpg' },
  { id:'demo-2', name:'One Piece - Straw Hat', description:'Wallpaper - Monkey D Luffy', image:'https://wallpapercave.com/wp/wp7440678.jpg' },
  { id:'demo-3', name:'Demon Slayer - Tanjiro', description:'Wallpaper - Demon Slayer', image:'https://wallpapercave.com/wp/wp6592381.jpg' },
  { id:'demo-4', name:'JJK - Gojo', description:'Jujutsu Kaisen - Satoru Gojo', image:'https://wallpapercave.com/wp/wp9511470.jpg' },
  { id:'demo-5', name:'AOT - Titans', description:'Attack on Titan poster', image:'https://wallpapercave.com/wp/wp8528787.jpg' },
  { id:'demo-6', name:'Bleach - Ichigo', description:'Bleach wallpaper', image:'https://wallpapercave.com/wp/wp2143840.jpg' }
];

/* ---------- Render gallery (fetch from /uploads/ if exists) ---------- */
async function loadGallery(){
  const galleryEl = document.getElementById('gallery');
  galleryEl.innerHTML = '<p style="grid-column:1/-1;text-align:center;color:#888">Loading...</p>';
  try {
    const res = await fetch('/uploads/');
    if(!res.ok) throw new Error('no backend');
    const items = await res.json();
    if(!Array.isArray(items) || items.length===0) throw new Error('empty');
    renderItems(items.map(i => ({
      id: i.id || i._id || i.fileId || i.name || Math.random().toString(36).slice(2),
      name: i.name || i.title || 'Unnamed',
      description: i.description || '',
      image: i.image || `/file/${i.id}` || i.url || ''
    })));
  } catch(err){
    // fallback demo items
    renderItems(DEMO_ITEMS);
  }
}

function renderItems(items){
  const galleryEl = document.getElementById('gallery');
  galleryEl.innerHTML = '';
  items.forEach(item => {
    const node = document.createElement('div');
    node.className = 'gallery-item';
    node.innerHTML = `
      <img src="${escapeHtml(item.image)}" alt="${escapeHtml(item.name)}" loading="lazy" onclick="window.open('${escapeAttr(item.image)}','_blank')">
      <div class="meta">
        <h3>${escapeHtml(item.name)}</h3>
        <p>${escapeHtml(item.description)}</p>
        <div class="row">
          <button class="download" onclick="downloadPhoto('${escapeAttr(item.image)}')">Download</button>
          ${ isAdmin ? `<button class="delete" onclick="deletePhoto('${escapeAttr(item.id)}')">Delete</button>` : '' }
        </div>
      </div>
    `;
    galleryEl.appendChild(node);
  });
}

/* ---------- Utilities ---------- */
function escapeHtml(s){ if(!s) return ''; return String(s).replaceAll('&','&amp;').replaceAll('<','&lt;').replaceAll('>','&gt;') }
function escapeAttr(s){ if(!s) return ''; return String(s).replaceAll("'", "\\'").replaceAll('"','\\"') }

/* ---------- Search filter ---------- */
function searchGallery(){
  const q = (document.getElementById('searchBar').value || '').toLowerCase().trim();
  const items = document.getElementsByClassName('gallery-item');
  Array.from(items).forEach(it => {
    const text = it.textContent.toLowerCase();
    it.style.display = q === '' ? 'flex' : (text.includes(q) ? 'flex' : 'none');
  });
}

/* ---------- Download helper ---------- */
function downloadPhoto(url){
  if(!url) return;
  const a = document.createElement('a');
  a.href = url;
  a.download = url.split('/').pop();
  document.body.appendChild(a);
  a.click();
  a.remove();
}

/* ---------- Admin actions (frontend demo) ---------- */
function login(){
  const user = (document.getElementById('username').value || '').trim();
  const pass = (document.getElementById('password').value || '').trim();
  if(user === ADMIN_USER && pass === ADMIN_PASS){
    isAdmin = true;
    alert('‚úÖ Admin logged in (demo). Upload/delete enabled.');
    document.getElementById('loginBox').style.display = 'none';
    document.getElementById('uploadForm').style.display = 'block';
    loadGallery(); // re-render to show delete buttons
  } else {
    alert('‚ùå Wrong username or password');
  }
}
async function deletePhoto(id){
  if(!confirm('Delete this photo?')) return;
  try {
    // backend delete endpoint expected: DELETE /uploads/:id
    const res = await fetch('/uploads/' + encodeURIComponent(id), {
      method:'DELETE',
      headers:{ 'Authorization': 'Basic ' + btoa(ADMIN_USER + ':' + ADMIN_PASS) }
    });
    const data = await res.json();
    if(data && data.success){
      alert('Deleted');
      loadGallery();
    } else {
      alert('Delete failed (backend response).');
    }
  } catch(e){
    alert('Delete failed ‚Äî no backend or error. In demo mode remove item manually.');
  }
}

/* ---------- Upload handler (frontend: posts to /upload) ---------- */
document.getElementById('uploadForm').addEventListener('submit', async (e) => {
  e.preventDefault();
  if(!isAdmin) return alert('Only admin can upload (demo)');
  const form = e.currentTarget;
  const fd = new FormData(form);
  try {
    const res = await fetch('/upload', { method:'POST', body:fd });
    const data = await res.json();
    if(data && data.success){
      alert('Uploaded');
      form.reset();
      loadGallery();
    } else {
      alert('Upload failed (backend error or no backend).');
    }
  } catch(err){
    alert('Upload failed ‚Äî no backend. This is frontend-only demo.');
  }
});

/* ---------- Init ---------- */
loadGallery();
</script>

</body>
</html>
